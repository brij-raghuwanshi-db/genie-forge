<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 280" style="max-width: 100%; height: auto;">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7c3aed"/>
    </marker>
    
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    
    <linearGradient id="purple" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#6d28d9"/>
    </linearGradient>
    
    <linearGradient id="green" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    
    <linearGradient id="blue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#2563eb"/>
    </linearGradient>
    
    <linearGradient id="orange" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    
    <linearGradient id="pink" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#db2777"/>
    </linearGradient>
  </defs>
  
  <style>
    .stage-box { filter: url(#shadow); }
    .stage-title { fill: white; font-family: system-ui, -apple-system, sans-serif; font-size: 11px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
    .node-text { fill: white; font-family: system-ui, -apple-system, sans-serif; font-size: 12px; font-weight: 500; }
    .small-text { fill: #a1a1aa; font-family: system-ui, -apple-system, sans-serif; font-size: 10px; }
    
    /* Animated flowing lines */
    .flow {
      stroke: #7c3aed;
      stroke-width: 2;
      fill: none;
      stroke-dasharray: 8 4;
      animation: dash 0.5s linear infinite;
    }
    
    .flow-slow {
      stroke: #ec4899;
      stroke-width: 2;
      fill: none;
      stroke-dasharray: 8 4;
      animation: dash 0.5s linear infinite reverse;
    }
    
    @keyframes dash {
      to { stroke-dashoffset: -12; }
    }
    
    /* Pulse for active node */
    .pulse-ring {
      animation: ring 2s ease-out infinite;
    }
    
    @keyframes ring {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(1.3); }
    }
    
    /* LIVE badge */
    .live { animation: blink 1.5s ease-in-out infinite; }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
  </style>
  
  <!-- LIVE Badge -->
  <g class="live">
    <rect x="820" y="10" width="60" height="22" rx="11" fill="#10b981"/>
    <text x="850" y="25" text-anchor="middle" fill="white" font-family="system-ui" font-size="11" font-weight="bold">LIVE</text>
  </g>
  
  <!-- Stage 1: DEFINE -->
  <g transform="translate(20, 40)">
    <rect class="stage-box" width="150" height="120" rx="10" fill="url(#purple)" opacity="0.15"/>
    <rect width="150" height="28" rx="10" fill="url(#purple)"/>
    <text class="stage-title" x="75" y="19" text-anchor="middle">1. DEFINE</text>
    
    <rect x="15" y="45" width="120" height="28" rx="6" fill="url(#purple)"/>
    <text class="node-text" x="75" y="64" text-anchor="middle">YAML Config</text>
    
    <rect x="15" y="85" width="120" height="28" rx="6" fill="url(#purple)" opacity="0.7"/>
    <text class="node-text" x="75" y="104" text-anchor="middle">Variables</text>
  </g>
  
  <!-- Arrow: Define -> Validate -->
  <path class="flow" d="M 170 100 L 200 100" marker-end="url(#arrow)"/>
  
  <!-- Stage 2: VALIDATE -->
  <g transform="translate(200, 40)">
    <rect class="stage-box" width="150" height="120" rx="10" fill="url(#green)" opacity="0.15"/>
    <rect width="150" height="28" rx="10" fill="url(#green)"/>
    <text class="stage-title" x="75" y="19" text-anchor="middle">2. VALIDATE</text>
    
    <polygon points="75,55 130,85 75,115 20,85" fill="url(#green)" filter="url(#shadow)"/>
    <text class="node-text" x="75" y="90" text-anchor="middle">validate</text>
  </g>
  
  <!-- Arrow: Validate -> Plan -->
  <path class="flow" d="M 350 100 L 380 100" marker-end="url(#arrow)"/>
  <text x="360" y="90" class="small-text" fill="#10b981">Valid </text>
  
  <!-- Stage 3: PLAN -->
  <g transform="translate(380, 40)">
    <rect class="stage-box" width="150" height="120" rx="10" fill="url(#blue)" opacity="0.15"/>
    <rect width="150" height="28" rx="10" fill="url(#blue)"/>
    <text class="stage-title" x="75" y="19" text-anchor="middle">3. PLAN</text>
    
    <rect x="15" y="45" width="120" height="28" rx="6" fill="url(#blue)"/>
    <text class="node-text" x="75" y="64" text-anchor="middle">plan</text>
    
    <rect x="15" y="85" width="120" height="28" rx="6" fill="url(#blue)" opacity="0.7"/>
    <text class="node-text" x="75" y="104" text-anchor="middle">Review</text>
  </g>
  
  <!-- Arrow: Plan -> Apply -->
  <path class="flow" d="M 530 100 L 560 100" marker-end="url(#arrow)"/>
  <text x="538" y="90" class="small-text" fill="#10b981">Approve</text>
  
  <!-- Stage 4: APPLY -->
  <g transform="translate(560, 40)">
    <rect class="stage-box" width="150" height="120" rx="10" fill="url(#orange)" opacity="0.15"/>
    <rect width="150" height="28" rx="10" fill="url(#orange)"/>
    <text class="stage-title" x="75" y="19" text-anchor="middle">4. APPLY</text>
    
    <rect x="15" y="45" width="120" height="28" rx="6" fill="url(#orange)"/>
    <text class="node-text" x="75" y="64" text-anchor="middle">apply</text>
    
    <rect x="15" y="85" width="120" height="28" rx="6" fill="url(#orange)" opacity="0.7"/>
    <text class="node-text" x="75" y="104" text-anchor="middle">Deployed!</text>
  </g>
  
  <!-- Arrow: Apply -> Monitor -->
  <path class="flow" d="M 710 100 L 740 100" marker-end="url(#arrow)"/>
  
  <!-- Stage 5: MONITOR -->
  <g transform="translate(740, 40)">
    <rect class="stage-box" width="150" height="120" rx="10" fill="url(#pink)" opacity="0.15"/>
    <rect width="150" height="28" rx="10" fill="url(#pink)"/>
    <text class="stage-title" x="75" y="19" text-anchor="middle">5. MONITOR</text>
    
    <rect x="15" y="45" width="120" height="28" rx="6" fill="url(#pink)"/>
    <text class="node-text" x="75" y="64" text-anchor="middle">status</text>
    
    <rect x="15" y="85" width="120" height="28" rx="6" fill="url(#pink)" opacity="0.7"/>
    <text class="node-text" x="75" y="104" text-anchor="middle">drift</text>
  </g>
  
  <!-- Feedback loop: Monitor -> Define (bottom arc) -->
  <path class="flow-slow" 
        d="M 815 170 
           C 815 230, 815 250, 600 250 
           L 200 250 
           C 95 250, 95 230, 95 180" 
        marker-end="url(#arrow)"/>
  <text x="450" y="265" text-anchor="middle" class="small-text" fill="#ec4899">Changes Detected ’ Update Config</text>
</svg>
